<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>支出修正</title>
<link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
	<h2 class="section-title">支出修正画面</h2>
	
	<form th:action="@{/expense-edit-confirm/{id}(id=${expenseId})}" method="POST" th:object="${expenseForm}" class="form-block">
		<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
		<!--バリテーションエラー表示--><br>
		<div th:if="${#fields.hasErrors('*')}" class="error-msg">
			<p>入力にエラーがあります。ご確認ください。</p>
			<ul>
				<li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
			</ul>
		</div>

		<label class="form-label">【日付】</label>
		<input type="date" th:field="*{date}" class="form-input">
		<div th:if="${#fields.hasErrors('date')}" th:errors="*{date}" class="error-msg"></div><br><br>
		<label class="form-label">【メモ】</label>
		<input type="text" th:field="*{memo}" class="form-input">
		<div th:if="${#fields.hasErrors('memo')}" th:errors="*{memo}" class="error-msg"></div><br><br>
		<label class="form-label">【カテゴリ】</label>
		<select th:field="*{categoryId}" class="form-select">
			<option value="">-- 選択してください --</option>
			<option th:each="cat : ${categories}" th:value="${cat.id}"
				th:text="${cat.name + (cat.isDefault ? '(共通)' : '')}">
			</option>
		</select>
		<div th:if="${#fields.hasErrors('categoryId')}" th:errors="*{categoryId}" class="error-msg"></div><br><br>
		<label class="form-label">【感情】</label>
		<select th:field="*{feelingId}" class="form-select">
			<option value="">-- 選択してください --</option>
			<option th:each="feel : ${feelings}" th:value="${feel.id}"
				th:text="${feel.name + (feel.isDefault ? '(共通)' : '')}">
			</option>
		</select>
		<div th:if="${#fields.hasErrors('feelingId')}" th:errors="*{feelingId}" class="error-msg"></div><br><br>
		<label class="form-label">【金額】</label>
		<input type="number" th:field="*{amount}" class="form-input">　円
		<div th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}" class="error-msg"></div><br><br>

		<br><br>
		<input type="submit" value="修正内容確認へ" class="btn">

	</form>

	<br><br><br>
	<a th:href="@{/expense-list}" class="btn-link">支出一覧画面へ戻る</a>


</body>

</html>